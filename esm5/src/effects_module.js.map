{"version":3,"file":"effects_module.js","sourceRoot":"ng://@ngrx/effects/","sources":["src/effects_module.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Injector,\n  ModuleWithProviders,\n  NgModule,\n  Optional,\n  SkipSelf,\n  Type,\n} from '@angular/core';\nimport { Actions } from './actions';\nimport { EffectSources } from './effect_sources';\nimport { EffectsFeatureModule } from './effects_feature_module';\nimport { defaultEffectsErrorHandler } from './effects_error_handler';\nimport { EffectsRootModule } from './effects_root_module';\nimport { EffectsRunner } from './effects_runner';\nimport {\n  _FEATURE_EFFECTS,\n  _ROOT_EFFECTS,\n  _ROOT_EFFECTS_GUARD,\n  EFFECTS_ERROR_HANDLER,\n  FEATURE_EFFECTS,\n  ROOT_EFFECTS,\n  USER_PROVIDED_EFFECTS,\n} from './tokens';\n\n@NgModule({})\nexport class EffectsModule {\n  static forFeature(\n    featureEffects: Type<any>[] = []\n  ): ModuleWithProviders<EffectsFeatureModule> {\n    return {\n      ngModule: EffectsFeatureModule,\n      providers: [\n        featureEffects,\n        {\n          provide: _FEATURE_EFFECTS,\n          multi: true,\n          useValue: featureEffects,\n        },\n        {\n          provide: USER_PROVIDED_EFFECTS,\n          multi: true,\n          useValue: [],\n        },\n        {\n          provide: FEATURE_EFFECTS,\n          multi: true,\n          useFactory: createEffects,\n          deps: [Injector, _FEATURE_EFFECTS, USER_PROVIDED_EFFECTS],\n        },\n      ],\n    };\n  }\n\n  static forRoot(\n    rootEffects: Type<any>[] = []\n  ): ModuleWithProviders<EffectsRootModule> {\n    return {\n      ngModule: EffectsRootModule,\n      providers: [\n        {\n          provide: _ROOT_EFFECTS_GUARD,\n          useFactory: _provideForRootGuard,\n          deps: [[EffectsRunner, new Optional(), new SkipSelf()]],\n        },\n        {\n          provide: EFFECTS_ERROR_HANDLER,\n          useValue: defaultEffectsErrorHandler,\n        },\n        EffectsRunner,\n        EffectSources,\n        Actions,\n        rootEffects,\n        {\n          provide: _ROOT_EFFECTS,\n          useValue: [rootEffects],\n        },\n        {\n          provide: USER_PROVIDED_EFFECTS,\n          multi: true,\n          useValue: [],\n        },\n        {\n          provide: ROOT_EFFECTS,\n          useFactory: createEffects,\n          deps: [Injector, _ROOT_EFFECTS, USER_PROVIDED_EFFECTS],\n        },\n      ],\n    };\n  }\n}\n\nexport function createEffects(\n  injector: Injector,\n  effectGroups: Type<any>[][],\n  userProvidedEffectGroups: Type<any>[][]\n): any[] {\n  const mergedEffects: Type<any>[] = [];\n\n  for (let effectGroup of effectGroups) {\n    mergedEffects.push(...effectGroup);\n  }\n\n  for (let userProvidedEffectGroup of userProvidedEffectGroups) {\n    mergedEffects.push(...userProvidedEffectGroup);\n  }\n\n  return createEffectInstances(injector, mergedEffects);\n}\n\nexport function createEffectInstances(\n  injector: Injector,\n  effects: Type<any>[]\n): any[] {\n  return effects.map(effect => injector.get(effect));\n}\n\nexport function _provideForRootGuard(runner: EffectsRunner): any {\n  if (runner) {\n    throw new TypeError(\n      `EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.`\n    );\n  }\n  return 'guarded';\n}\n"]}